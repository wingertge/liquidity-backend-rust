<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `parse_duration` crate."><meta name="keywords" content="rust, rustlang, rust-lang, parse_duration"><title>parse_duration - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../dark.css"><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script src="../storage.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="shortcut icon" href="../favicon.ico"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../parse_duration/index.html'><div class='logo-container'><img src='../rust-logo.png' alt='logo'></div></a><p class='location'>Crate parse_duration</p><div class="sidebar-elems"><a id='all-types' href='all.html'><p>See all parse_duration's items</p></a><div class="block items"><ul><li><a href="#functions">Functions</a></li></ul></div><p class='location'></p><script>window.sidebarCurrent = {name: 'parse_duration', ty: 'mod', relpath: '../'};</script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../theme.js"></script><nav class="sub"><form class="search-form js-only"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../src/parse_duration/lib.rs.html#23-168' title='goto source code'>[src]</a></span><span class='in-band'>Crate <a class="mod" href=''>parse_duration</a></span></h1><div class='docblock'><p>This crate provides a function <a href="fn.parse.html"><code>parse</code></a> for parsing strings into durations.
The parser is based on the standard set by
<a href="https://www.freedesktop.org/software/systemd/man/systemd.time.html#Parsing%20Time%20Spans">systemd.time</a>,
but extends it significantly.
For example, negative numbers, decimals and exponents are allowed.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">parse_duration</span>::<span class="ident">parse</span>;
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">time</span>::<span class="ident">Duration</span>;

<span class="comment">// One hour less than a day</span>
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">parse</span>(<span class="string">&quot;1 day -1 hour&quot;</span>), <span class="prelude-val">Ok</span>(<span class="ident">Duration</span>::<span class="ident">new</span>(<span class="number">82_800</span>, <span class="number">0</span>)));
<span class="comment">// Using exponents</span>
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">parse</span>(<span class="string">&quot;1.26e-1 days&quot;</span>), <span class="prelude-val">Ok</span>(<span class="ident">Duration</span>::<span class="ident">new</span>(<span class="number">10_886</span>, <span class="number">400_000_000</span>)));
<span class="comment">// Extra things will be ignored</span>
<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">parse</span>(<span class="string">&quot;Duration: 1 hour, 15 minutes and 29 seconds&quot;</span>),
    <span class="prelude-val">Ok</span>(<span class="ident">Duration</span>::<span class="ident">new</span>(<span class="number">4529</span>, <span class="number">0</span>))
);</pre></div>
<h1 id="syntax" class="section-header"><a href="#syntax">Syntax</a></h1>
<p>Generally, the accepted syntax is a sequence of <code>[value]</code> <code>[unit]</code> pairs, such as
<code>&quot;15 days 20 seconds 100 milliseconds&quot;</code>.
Spaces are not needed as in <code>&quot;15days20seconds100milliseconds&quot;</code>.
Order doesn't matter at all.</p>
<p>Characters other than alphanumeric (actually all word characters as defined by the regex crate)
are ignored,
other than the fact that they act as a word boundary.
So <code>&quot;.:++++]][][[][15[]][seconds][]:}}}}&quot;</code> is the same as <code>&quot;15 seconds&quot;</code>.</p>
<p>Any words with no corresponding value are ignored.
So in <code>&quot;14 days seconds&quot;</code>, <code>&quot;seconds&quot;</code> would be ignored.</p>
<p>Any value without a unit will produce an error, unless <em>only</em> that unit is passed
(besides non-word characters).
In that case, the value is interpreted as seconds.
For example, <code>&quot;.:++++]][][[][15[]][][]:}}}}&quot;</code> would be interpreted as 15 seconds.</p>
<p>If the same unit is specified more than once, the sum of the values is used.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">parse_duration</span>::<span class="ident">parse</span>;
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">time</span>::<span class="ident">Duration</span>;

<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">parse</span>(<span class="string">&quot;15 days 20 seconds 100 milliseconds&quot;</span>),
    <span class="prelude-val">Ok</span>(<span class="ident">Duration</span>::<span class="ident">new</span>(<span class="number">1_296_020</span>, <span class="number">100_000_000</span>))
);
<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">parse</span>(<span class="string">&quot;15days20seconds100milliseconds&quot;</span>),
    <span class="prelude-val">Ok</span>(<span class="ident">Duration</span>::<span class="ident">new</span>(<span class="number">1_296_020</span>, <span class="number">100_000_000</span>))
);

<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">parse</span>(<span class="string">&quot;.:++++]][][[][15[]][seconds][]:}}}}&quot;</span>), <span class="prelude-val">Ok</span>(<span class="ident">Duration</span>::<span class="ident">new</span>(<span class="number">15</span>, <span class="number">0</span>)));

<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">parse</span>(<span class="string">&quot;14 days seconds&quot;</span>), <span class="prelude-val">Ok</span>(<span class="ident">Duration</span>::<span class="ident">new</span>(<span class="number">1_209_600</span>, <span class="number">0</span>)));

<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">parse</span>(<span class="string">&quot;.:++++]][][[][15[]][][]:}}}}&quot;</span>), <span class="prelude-val">Ok</span>(<span class="ident">Duration</span>::<span class="ident">new</span>(<span class="number">15</span>, <span class="number">0</span>)));

<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">parse</span>(<span class="string">&quot;10 seconds 20 seconds&quot;</span>), <span class="prelude-val">Ok</span>(<span class="ident">Duration</span>::<span class="ident">new</span>(<span class="number">30</span>, <span class="number">0</span>)));</pre></div>
<h1 id="units" class="section-header"><a href="#units">Units</a></h1>
<p>The following units are accepted:</p>
<ul>
<li>nanoseconds</li>
<li>microseconds</li>
<li>milliseconds</li>
<li>seconds</li>
<li>minutes</li>
<li>hours</li>
<li>days</li>
<li>weeks</li>
<li>months</li>
<li>years</li>
</ul>
<p>Years are defined using the average over 400 years in the Gregorian calendar.
As such, a year is equivalent to 365.2425 days. A month is defined as one twelfth of a year.</p>
<p>Abbreviations for each of these units are accepted.
The general rule is that any initial segment of the full name is accepted as long as it's not
ambiguous.
Additionally, the parser is generally case-insensitive.
The exception to both these rules is that <code>&quot;m&quot;</code> (or <code>&quot;mi&quot;</code> or <code>&quot;min&quot;</code>...)
is accepted for minutes
and <code>&quot;M&quot;</code> (or <code>&quot;Mo&quot;</code> or <code>&quot;Mon&quot;</code>...) is accepted for months.
Initial segments for other abbreviations
(<code>&quot;nsecs&quot;</code>, <code>&quot;usecs&quot;</code>, <code>&quot;μsecs&quot;</code>, <code>&quot;msecs&quot;</code>, <code>&quot;secs&quot;</code>, <code>&quot;mins&quot;</code>, <code>&quot;hrs&quot;</code>, <code>&quot;wks&quot;</code>, <code>&quot;yrs&quot;</code>)
are also accepted.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">parse_duration</span>::<span class="ident">parse</span>;
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">time</span>::<span class="ident">Duration</span>;

<span class="comment">// Full names may be used</span>
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">parse</span>(<span class="string">&quot;10 days 1 nanoseconds 15 years&quot;</span>), <span class="prelude-val">Ok</span>(<span class="ident">Duration</span>::<span class="ident">new</span>(<span class="number">474_218_280</span>, <span class="number">1</span>)));
<span class="comment">// or very short names</span>
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">parse</span>(<span class="string">&quot;10d1n15y&quot;</span>), <span class="prelude-val">Ok</span>(<span class="ident">Duration</span>::<span class="ident">new</span>(<span class="number">474_218_280</span>, <span class="number">1</span>)));</pre></div>
<h1 id="values" class="section-header"><a href="#values">Values</a></h1>
<p>The values may be an integer, a decimal, or a mantissa with an exponent.
They may be as large as desired as long as the final duration is less than
2<sup>64</sup> seconds.</p>
<p>Negatives are allowed, but the negative sign must be directly adjacent to the value:
<code>&quot;-15 seconds&quot;</code>, not <code>&quot;- 15 seconds&quot;</code>.
When using negative values, the sum must end up non-negative, since <code>Duration</code>s are positive
durations.</p>
<p>Decimals are accurate up to nanosecond precision.
They will be rounded down to the nearest nanosecond if necessary.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">parse_duration</span>::<span class="ident">parse</span>;
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">time</span>::<span class="ident">Duration</span>;

<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">parse</span>(<span class="string">&quot;1 day -1 hour&quot;</span>), <span class="prelude-val">Ok</span>(<span class="ident">Duration</span>::<span class="ident">new</span>(<span class="number">82_800</span>, <span class="number">0</span>)));

<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">parse</span>(<span class="string">&quot;1.84467e19 seconds&quot;</span>), <span class="prelude-val">Ok</span>(<span class="ident">Duration</span>::<span class="ident">new</span>(<span class="number">18_446_700_000_000_000_000</span>, <span class="number">0</span>)));
<span class="macro">assert_eq</span><span class="macro">!</span>(
    <span class="ident">parse</span>(<span class="string">&quot;1.84467e28 nanoseconds&quot;</span>),
    <span class="prelude-val">Ok</span>(<span class="ident">Duration</span>::<span class="ident">new</span>(<span class="number">18_446_700_000_000_000_000</span>, <span class="number">0</span>))
);</pre></div>
</div><h2 id='functions' class='section-header'><a href="#functions">Functions</a></h2>
<table><tr class='module-item'><td><a class="fn" href="fn.parse.html" title='parse_duration::parse fn'>parse</a></td><td class='docblock-short'><p>Parse a string into a duration object.</p>
</td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../";window.currentCrate = "parse_duration";</script><script src="../aliases.js"></script><script src="../main.js"></script><script defer src="../search-index.js"></script></body></html>