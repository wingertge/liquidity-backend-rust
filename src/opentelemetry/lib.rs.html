<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Source to the Rust file `/home/runner/.cargo/registry/src/github.com-1ecc6299db9ec823/opentelemetry-0.1.5/src/lib.rs`."><meta name="keywords" content="rust, rustlang, rust-lang"><title>lib.rs.html -- source</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css"><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script src="../../storage.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="shortcut icon" href="../../favicon.ico"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc source"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../opentelemetry/index.html'><div class='logo-container'><img src='../../rust-logo.png' alt='logo'></div></a></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../theme.js"></script><nav class="sub"><form class="search-form js-only"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../../settings.html"><img src="../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><pre class="line-numbers"><span id="1">  1</span>
<span id="2">  2</span>
<span id="3">  3</span>
<span id="4">  4</span>
<span id="5">  5</span>
<span id="6">  6</span>
<span id="7">  7</span>
<span id="8">  8</span>
<span id="9">  9</span>
<span id="10"> 10</span>
<span id="11"> 11</span>
<span id="12"> 12</span>
<span id="13"> 13</span>
<span id="14"> 14</span>
<span id="15"> 15</span>
<span id="16"> 16</span>
<span id="17"> 17</span>
<span id="18"> 18</span>
<span id="19"> 19</span>
<span id="20"> 20</span>
<span id="21"> 21</span>
<span id="22"> 22</span>
<span id="23"> 23</span>
<span id="24"> 24</span>
<span id="25"> 25</span>
<span id="26"> 26</span>
<span id="27"> 27</span>
<span id="28"> 28</span>
<span id="29"> 29</span>
<span id="30"> 30</span>
<span id="31"> 31</span>
<span id="32"> 32</span>
<span id="33"> 33</span>
<span id="34"> 34</span>
<span id="35"> 35</span>
<span id="36"> 36</span>
<span id="37"> 37</span>
<span id="38"> 38</span>
<span id="39"> 39</span>
<span id="40"> 40</span>
<span id="41"> 41</span>
<span id="42"> 42</span>
<span id="43"> 43</span>
<span id="44"> 44</span>
<span id="45"> 45</span>
<span id="46"> 46</span>
<span id="47"> 47</span>
<span id="48"> 48</span>
<span id="49"> 49</span>
<span id="50"> 50</span>
<span id="51"> 51</span>
<span id="52"> 52</span>
<span id="53"> 53</span>
<span id="54"> 54</span>
<span id="55"> 55</span>
<span id="56"> 56</span>
<span id="57"> 57</span>
<span id="58"> 58</span>
<span id="59"> 59</span>
<span id="60"> 60</span>
<span id="61"> 61</span>
<span id="62"> 62</span>
<span id="63"> 63</span>
<span id="64"> 64</span>
<span id="65"> 65</span>
<span id="66"> 66</span>
<span id="67"> 67</span>
<span id="68"> 68</span>
<span id="69"> 69</span>
<span id="70"> 70</span>
<span id="71"> 71</span>
<span id="72"> 72</span>
<span id="73"> 73</span>
<span id="74"> 74</span>
<span id="75"> 75</span>
<span id="76"> 76</span>
<span id="77"> 77</span>
<span id="78"> 78</span>
<span id="79"> 79</span>
<span id="80"> 80</span>
<span id="81"> 81</span>
<span id="82"> 82</span>
<span id="83"> 83</span>
<span id="84"> 84</span>
<span id="85"> 85</span>
<span id="86"> 86</span>
<span id="87"> 87</span>
<span id="88"> 88</span>
<span id="89"> 89</span>
<span id="90"> 90</span>
<span id="91"> 91</span>
<span id="92"> 92</span>
<span id="93"> 93</span>
<span id="94"> 94</span>
<span id="95"> 95</span>
<span id="96"> 96</span>
<span id="97"> 97</span>
<span id="98"> 98</span>
<span id="99"> 99</span>
<span id="100">100</span>
<span id="101">101</span>
<span id="102">102</span>
<span id="103">103</span>
<span id="104">104</span>
<span id="105">105</span>
<span id="106">106</span>
<span id="107">107</span>
<span id="108">108</span>
<span id="109">109</span>
<span id="110">110</span>
<span id="111">111</span>
<span id="112">112</span>
<span id="113">113</span>
<span id="114">114</span>
<span id="115">115</span>
<span id="116">116</span>
<span id="117">117</span>
<span id="118">118</span>
<span id="119">119</span>
<span id="120">120</span>
<span id="121">121</span>
<span id="122">122</span>
<span id="123">123</span>
<span id="124">124</span>
<span id="125">125</span>
<span id="126">126</span>
<span id="127">127</span>
<span id="128">128</span>
<span id="129">129</span>
<span id="130">130</span>
<span id="131">131</span>
<span id="132">132</span>
<span id="133">133</span>
<span id="134">134</span>
<span id="135">135</span>
<span id="136">136</span>
<span id="137">137</span>
<span id="138">138</span>
<span id="139">139</span>
<span id="140">140</span>
<span id="141">141</span>
<span id="142">142</span>
<span id="143">143</span>
<span id="144">144</span>
<span id="145">145</span>
<span id="146">146</span>
<span id="147">147</span>
<span id="148">148</span>
<span id="149">149</span>
<span id="150">150</span>
<span id="151">151</span>
<span id="152">152</span>
<span id="153">153</span>
<span id="154">154</span>
<span id="155">155</span>
<span id="156">156</span>
<span id="157">157</span>
<span id="158">158</span>
<span id="159">159</span>
<span id="160">160</span>
<span id="161">161</span>
<span id="162">162</span>
<span id="163">163</span>
<span id="164">164</span>
<span id="165">165</span>
<span id="166">166</span>
<span id="167">167</span>
<span id="168">168</span>
<span id="169">169</span>
<span id="170">170</span>
<span id="171">171</span>
<span id="172">172</span>
<span id="173">173</span>
<span id="174">174</span>
<span id="175">175</span>
<span id="176">176</span>
<span id="177">177</span>
<span id="178">178</span>
<span id="179">179</span>
<span id="180">180</span>
<span id="181">181</span>
<span id="182">182</span>
<span id="183">183</span>
<span id="184">184</span>
<span id="185">185</span>
<span id="186">186</span>
<span id="187">187</span>
<span id="188">188</span>
<span id="189">189</span>
<span id="190">190</span>
<span id="191">191</span>
<span id="192">192</span>
<span id="193">193</span>
<span id="194">194</span>
<span id="195">195</span>
<span id="196">196</span>
<span id="197">197</span>
<span id="198">198</span>
<span id="199">199</span>
<span id="200">200</span>
<span id="201">201</span>
<span id="202">202</span>
<span id="203">203</span>
<span id="204">204</span>
<span id="205">205</span>
<span id="206">206</span>
<span id="207">207</span>
<span id="208">208</span>
<span id="209">209</span>
<span id="210">210</span>
<span id="211">211</span>
</pre><div class="example-wrap"><pre class="rust ">
<span class="doccomment">//! # OpenTelemetry Overview</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! ## Distributed Tracing</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! A distributed trace is a set of events, triggered as a result of a single</span>
<span class="doccomment">//! logical operation, consolidated across various components of an application. A</span>
<span class="doccomment">//! distributed trace contains events that cross process, network and security</span>
<span class="doccomment">//! boundaries. A distributed trace may be initiated when someone presses a button</span>
<span class="doccomment">//! to start an action on a website - in this example, the trace will represent</span>
<span class="doccomment">//! calls made between the downstream services that handled the chain of requests</span>
<span class="doccomment">//! initiated by this button being pressed.</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! ### Trace</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! **Traces** in OpenTelemetry are defined implicitly by their **Spans**. In</span>
<span class="doccomment">//! particular, a **Trace** can be thought of as a directed acyclic graph (DAG) of</span>
<span class="doccomment">//! **Spans**, where the edges between **Spans** are defined as parent/child</span>
<span class="doccomment">//! relationship.</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! For example, the following is an example **Trace** made up of 6 **Spans**:</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! ```ascii</span>
<span class="doccomment">//! Causal relationships between Spans in a single Trace</span>
<span class="doccomment">//!</span>
<span class="doccomment">//!         [Span A]  ←←←(the root span)</span>
<span class="doccomment">//!             |</span>
<span class="doccomment">//!      +------+------+</span>
<span class="doccomment">//!      |             |</span>
<span class="doccomment">//!  [Span B]      [Span C] ←←←(Span C is a `child` of Span A)</span>
<span class="doccomment">//!      |             |</span>
<span class="doccomment">//!  [Span D]      +---+-------+</span>
<span class="doccomment">//!                |           |</span>
<span class="doccomment">//!            [Span E]    [Span F]</span>
<span class="doccomment">//! ```</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! Sometimes it&#39;s easier to visualize **Traces** with a time axis as in the diagram</span>
<span class="doccomment">//! below:</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! ```ascii</span>
<span class="doccomment">//! Temporal relationships between Spans in a single Trace</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! ––|–––––––|–––––––|–––––––|–––––––|–––––––|–––––––|–––––––|–&gt; time</span>
<span class="doccomment">//!</span>
<span class="doccomment">//!  [Span A···················································]</span>
<span class="doccomment">//!    [Span B··············································]</span>
<span class="doccomment">//!       [Span D··········································]</span>
<span class="doccomment">//!     [Span C········································]</span>
<span class="doccomment">//!          [Span E·······]        [Span F··]</span>
<span class="doccomment">//! ```</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! ### Span</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! Each **Span** encapsulates the following state:</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! - An operation name</span>
<span class="doccomment">//! - A start and finish timestamp</span>
<span class="doccomment">//! - A set of zero or more key:value **Attributes**. The keys must be strings. The</span>
<span class="doccomment">//!   values may be strings, bools, or numeric types.</span>
<span class="doccomment">//! - A set of zero or more **Events**, each of which is itself a key:value map</span>
<span class="doccomment">//!   paired with a timestamp. The keys must be strings, though the values may be of</span>
<span class="doccomment">//!   the same types as Span **Attributes**.</span>
<span class="doccomment">//! - Parent&#39;s **Span** identifier.</span>
<span class="doccomment">//! - **Links** to zero or more causally-related **Spans**</span>
<span class="doccomment">//!   (via the **SpanContext** of those related **Spans**).</span>
<span class="doccomment">//! - **SpanContext** identification of a Span. See below.</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! ### SpanContext</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! Represents all the information that identifies **Span** in the **Trace** and</span>
<span class="doccomment">//! is propagated to child Spans and across process boundaries. A</span>
<span class="doccomment">//! **SpanContext** contains the tracing identifiers and the options that are</span>
<span class="doccomment">//! propagated from parent to child **Spans**.</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! - **TraceId** is the identifier for a trace. It is worldwide unique with</span>
<span class="doccomment">//!   practically sufficient probability by being made as 16 randomly generated</span>
<span class="doccomment">//!   bytes. TraceId is used to group all spans for a specific trace together across</span>
<span class="doccomment">//!   all processes.</span>
<span class="doccomment">//! - **SpanId** is the identifier for a span. It is globally unique with</span>
<span class="doccomment">//!   practically sufficient probability by being made as 8 randomly generated</span>
<span class="doccomment">//!   bytes. When passed to a child Span this identifier becomes the parent span id</span>
<span class="doccomment">//!   for the child **Span**.</span>
<span class="doccomment">//! - **TraceFlags** represents the options for a trace. It is represented as 1</span>
<span class="doccomment">//!   byte (bitmap).</span>
<span class="doccomment">//!   - Sampling bit -  Bit to represent whether trace is sampled or not (mask</span>
<span class="doccomment">//!     `0x1`).</span>
<span class="doccomment">//! - **Tracestate** carries tracing-system specific context in a list of key value</span>
<span class="doccomment">//!   pairs. **Tracestate** allows different vendors propagate additional</span>
<span class="doccomment">//!   information and inter-operate with their legacy Id formats. For more details</span>
<span class="doccomment">//!   see [this](https://w3c.github.io/trace-context/#tracestate-field).</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! ### Links between spans</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! A **Span** may be linked to zero or more other **Spans** (defined by</span>
<span class="doccomment">//! **SpanContext**) that are causally related. **Links** can point to</span>
<span class="doccomment">//! **SpanContexts** inside a single **Trace** or across different **Traces**.</span>
<span class="doccomment">//! **Links** can be used to represent batched operations where a **Span** was</span>
<span class="doccomment">//! initiated by multiple initiating **Span**s, each representing a single incoming</span>
<span class="doccomment">//! item being processed in the batch.</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! Another example of using a **Link** is to declare the relationship between</span>
<span class="doccomment">//! the originating and following trace. This can be used when a **Trace** enters trusted</span>
<span class="doccomment">//! boundaries of a service and service policy requires the generation of a new</span>
<span class="doccomment">//! Trace rather than trusting the incoming Trace context. The new linked Trace may</span>
<span class="doccomment">//! also represent a long running asynchronous data processing operation that was</span>
<span class="doccomment">//! initiated by one of many fast incoming requests.</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! When using the scatter/gather (also called fork/join) pattern, the root</span>
<span class="doccomment">//! operation starts multiple downstream processing operations and all of them are</span>
<span class="doccomment">//! aggregated back in a single **Span**. This last **Span** is linked to many</span>
<span class="doccomment">//! operations it aggregates. All of them are the **Span**s from the same Trace. And</span>
<span class="doccomment">//! similar to the Parent field of a **Span**. It is recommended, however, to not</span>
<span class="doccomment">//! set parent of the **Span** in this scenario as semantically the parent field</span>
<span class="doccomment">//! represents a single parent scenario, in many cases the parent **Span** fully</span>
<span class="doccomment">//! encloses the child **Span**. This is not the case in scatter/gather and batch</span>
<span class="doccomment">//! scenarios.</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! ## Metrics</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! OpenTelemetry allows to record raw measurements or metrics with predefined</span>
<span class="doccomment">//! aggregation and set of labels.</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! Recording raw measurements using OpenTelemetry API allows to defer to end-user</span>
<span class="doccomment">//! the decision on what aggregation algorithm should be applied for this metric as</span>
<span class="doccomment">//! well as defining labels (dimensions). It will be used in client libraries like</span>
<span class="doccomment">//! gRPC to record raw measurements &quot;server_latency&quot; or &quot;received_bytes&quot;. So end</span>
<span class="doccomment">//! user will decide what type of aggregated values should be collected out of these</span>
<span class="doccomment">//! raw measurements. It may be simple average or elaborate histogram calculation.</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! Recording of metrics with the pre-defined aggregation using OpenTelemetry API is</span>
<span class="doccomment">//! not less important. It allows to collect values like cpu and memory usage, or</span>
<span class="doccomment">//! simple metrics like &quot;queue length&quot;.</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! ### Recording raw measurements</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! The main types used to record raw measurements are `Measure` and</span>
<span class="doccomment">//! `Measurement`. List of `Measurement`s alongside the additional context can be</span>
<span class="doccomment">//! recorded using OpenTelemetry API. So user may define to aggregate those</span>
<span class="doccomment">//! `Measurement`s and use the context passed alongside to define additional</span>
<span class="doccomment">//! dimensions of the resulting metric.</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! #### Measure</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! `Measure` describes the type of the individual values recorded by a library. It</span>
<span class="doccomment">//! defines a contract between the library exposing the measurements and an</span>
<span class="doccomment">//! application that will aggregate those individual measurements into a `Metric`.</span>
<span class="doccomment">//! `Measure` is identified by name, description and a unit of values.</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! #### Measurement</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! `Measurement` describes a single value to be collected for a `Measure`.</span>
<span class="doccomment">//! `Measurement` is an empty interface in API surface. This interface is defined in</span>
<span class="doccomment">//! SDK.</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! ### Recording metrics with predefined aggregation</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! The base trait for creating new metrics metrics is called `Meter`. It</span>
<span class="doccomment">//! defines basic methods like creating metrics with a name and labels. Structs</span>
<span class="doccomment">//! implementing the various metrics define their aggregation type as well as a structure of</span>
<span class="doccomment">//! individual measurements or Points. API defines the following types of</span>
<span class="doccomment">//! pre-aggregated metrics:</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! - Counter metric to report instantaneous measurement. Counter values can go</span>
<span class="doccomment">//!   up or stay the same, but can never go down. Counter values cannot be</span>
<span class="doccomment">//!   negative. There are two types of counter metric values - `i64` and `f64`.</span>
<span class="doccomment">//! - Gauge metric to report instantaneous measurement of a numeric value. Gauges can</span>
<span class="doccomment">//!   go both up and down. The gauges values can be negative. There are two types of</span>
<span class="doccomment">//!   gauge metric values - `i64` and `f64`.</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! The `Meter` API allows you to construct the metric of a chosen type. The SDK</span>
<span class="doccomment">//! defines the way to query the current value of a metric to be exported.</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! Every type of a metric has it&#39;s API to record values to be aggregated. API</span>
<span class="doccomment">//! supports both - push and pull model of setting the `Metric` value.</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! ### Metrics data model and SDK</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! Metrics data model is defined in SDK and is based on</span>
<span class="doccomment">//! [metrics.proto](https://github.com/open-telemetry/opentelemetry-proto/blob/master/opentelemetry/proto/metrics/v1/metrics.proto).</span>
<span class="doccomment">//! This data model is used by all the OpenTelemetry exporters as an input.</span>
<span class="doccomment">//! Different exporters have different capabilities (e.g. which data types are</span>
<span class="doccomment">//! supported) and different constraints (e.g. which characters are allowed in label</span>
<span class="doccomment">//! keys). Metrics is intended to be a superset of what&#39;s possible, not a lowest</span>
<span class="doccomment">//! common denominator that&#39;s supported everywhere. All exporters consume data from</span>
<span class="doccomment">//! Metrics Data Model via a Metric Producer interface defined in OpenTelemetry SDK.</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! Because of this, Metrics puts minimal constraints on the data (e.g. which</span>
<span class="doccomment">//! characters are allowed in keys), and code dealing with Metrics should avoid</span>
<span class="doccomment">//! validation and sanitization of the Metrics data. Instead, pass the data to the</span>
<span class="doccomment">//! backend, rely on the backend to perform validation, and pass back any errors</span>
<span class="doccomment">//! from the backend.</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! OpenTelemetry defines the naming convention for metric names as well as a</span>
<span class="doccomment">//! well-known metric names in [Semantic Conventions](data-semantic-conventions.md)</span>
<span class="doccomment">//! document.</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! ## Propagators</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! OpenTelemetry uses `Propagators` to serialize and deserialize `SpanContext` and</span>
<span class="doccomment">//! `DistributedContext` into a binary or text format. Currently there are two types of propagators:</span>
<span class="doccomment">//!</span>
<span class="doccomment">//! - `BinaryFormat` which is used to serialize and deserialize a value into a binary representation.</span>
<span class="doccomment">//! - `HTTPTextFormat` which is used to inject and extract a value as text into carriers that travel</span>
<span class="doccomment">//!   in-band across process boundaries.</span>
<span class="doccomment">//!</span>
<span class="attribute">#![<span class="ident">deny</span>(<span class="ident">missing_docs</span>, <span class="ident">unreachable_pub</span>, <span class="ident">missing_debug_implementations</span>)]</span>
<span class="attribute">#![<span class="ident">cfg_attr</span>(<span class="ident">test</span>, <span class="ident">deny</span>(<span class="ident">warnings</span>))]</span>

<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">api</span>;
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">exporter</span>;
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">global</span>;
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">sdk</span>;
</pre></div>
</section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../";window.currentCrate = "opentelemetry";</script><script src="../../aliases.js"></script><script src="../../main.js"></script><script src="../../source-script.js"></script><script src="../../source-files.js"></script><script defer src="../../search-index.js"></script></body></html>